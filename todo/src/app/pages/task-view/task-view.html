<h1>Add a New Task</h1>
<div class="layout">
  <div class="form-grid">
    <div class="form-row">
      <h3>Task Title</h3>
      <mat-form-field>
        <input matInput [(ngModel)]="newTask.title" required>
      </mat-form-field>
    </div>
    <div class="form-row">
      <h3>Description</h3>
      <mat-form-field>
        <mat-label>Enter Task Description</mat-label>
        <textarea matInput [(ngModel)]="newTask.description"></textarea>
      </mat-form-field>
    </div>
    <div class="form-row date-row">
      <h3>Due Date</h3>
      <mat-form-field>
        <mat-label>MM/DD/YYYY</mat-label>
        <input matInput [matDatepicker]="datePicker" [(ngModel)]="newTask.duedate">
        <mat-datepicker-toggle matIconSuffix [for]="datePicker"></mat-datepicker-toggle>
        <mat-datepicker #datePicker></mat-datepicker>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Pick a time</mat-label>
        <input matInput [matTimepicker]="timePicker" [(ngModel)]="newTask.duetime">
        <mat-timepicker-toggle matIconSuffix [for]="timePicker"/>
        <mat-timepicker #timePicker/>
      </mat-form-field>
    </div>
    <div class="form-row">
      <h3>Add Tag(s)</h3>
      <mat-chip-listbox class="mat-mdc-chip-set-stacked" aria-label="Tag selection" [multiple]="true">
        <mat-chip-option *ngFor="let tag of tags" [value]="tag.id" [selected]="newTask.tags?.includes(tag.id)" (click)="toggleTag(tag.id)" [style.color]="tag.color" style="width: auto; margin-top: 10px; background: transparent; border-width: 0.9px; border-style: solid">
          {{tag.name}}
        </mat-chip-option>
      </mat-chip-listbox>
    </div>
    <div class="form-row recurring-row">
      <mat-checkbox class="example-margin" [(ngModel)]="isRecurring" (change)="setRecurring($event.checked)">
        <h3>Make Recurring</h3>
      </mat-checkbox>
      <div class="recurring-frequency" *ngIf="isRecurring && newTask.recurring">
        <h3>Repeat daily/weekly/monthly for</h3>
        <mat-form-field>
          <mat-label>Number</mat-label>
          <input matInput type="number" class="example-right-align" placeholder="2" [(ngModel)]="newTask.recurring.frequency" min="2"/>
        </mat-form-field>
        <mat-form-field>
          <mat-label>Select</mat-label>
          <mat-select [(ngModel)]="newTask.recurring.type" name="recurringType">
            <mat-option value="day">Days</mat-option>
            <mat-option value="week">Weeks</mat-option>
            <mat-option value="month">Months</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <div class="form-row buttons">
      <app-button icon="cancel" label="Cancel" (click)="cancel()"></app-button>
      <app-button label="Create" (click)="addTask()"></app-button>
    </div>
  </div>
</div>

